/*!
 * 
 * 	drivewealth-client - JavaScript bindings for the DriveWealth API
 * 	Author: John Shammas
 * 	Version: v1.0.1
 * 	Url: https://github.com/drivewealth/drivewealth-javascript
 * 	License(s): ISC
 * 
 */
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.drivewealth=t():e.drivewealth=t()})(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=r(o),a=n(4),i=r(a),s=n(8),c=r(s),l=n(10),d=r(l),f=n(7),p=r(f),y=n(9),h=r(y),v=n(11),m=r(v),g=n(6),D=r(g),b=n(3),I=n(2),S=r(I);t.default={ENVIRONMENTS:b.ENVIRONMENTS,HOSTS:b.HOSTS,Account:u.default,Config:b.Config,Error:i.default,Funding:c.default,Instrument:d.default,Order:p.default,Reports:h.default,User:m.default,Sessions:D.default,setup:b.setup,request:S.default},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),s=r(i),c=n(6),l=r(c),d=n(7),f=r(d),p=n(8),y=r(p),h=n(9),v=r(h),m=function(){function e(t){u(this,e),Object.assign(this,t)}return a(e,[{key:"getBlotter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.getBlotter(this.userID,this.accountID,t)}},{key:"getPerformance",value:function(){return e.getPerformance.apply(e,[this.userID,this.accountID].concat(Array.prototype.slice.call(arguments)))}},{key:"placeOrder",value:function(e,t){var n={accountID:this.accountID,accountNo:this.accountNo,accountType:this.accountType,userID:this.userID};return f.default.create(e,n,t)}},{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.userID=this.userID,e.accountID=this.accountID,y.default.getFundingMethods(e)}},{key:"getTransactions",value:function(e,t){return v.default.getTransactions(this.userID,this.accountNo,e,t)}},{key:"getPlacedOrders",value:function(e,t){return v.default.getPlacedOrders(this.userID,this.accountNo,e,t)}},{key:"getStatements",value:function(e,t){return v.default.getStatements(this.userID,this.accountID,e,t)}},{key:"getTaxDocuments",value:function(e,t){return v.default.getTaxDocuments(this.userID,this.accountID,e,t)}},{key:"getTradeConfirms",value:function(e,t){return v.default.getTradeConfirms(this.userID,this.accountID,e,t)}},{key:"generateDownloadURL",value:function(e){return v.default.generateDownloadURL(this.userID,this.accountID,e)}},{key:"extractIDs",value:function(e){return Object.assign({},e,{userID:this.userID,accountID:this.accountID})}},{key:"getSubscription",value:function(){return e.getSubscription(this.extractIDs())}},{key:"addSubscription",value:function(t){return e.addSubscription(this.extractIDs(t))}},{key:"updateSubscription",value:function(t){return e.updateSubscription(this.extractIDs(t))}},{key:"cancelSubscription",value:function(){return e.cancelSubscription(this.extractIDs())}}],[{key:"getBlotter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,s.default)({method:"GET",endpoint:"/users/"+e+"/accountSummary/"+t+(n?"/"+n:""),sessionKey:l.default.get(e)}).then(function(e){var t=e.body;return t.orders&&(t.orders=t.orders.map(function(e){return new f.default(e)})),n?t[n]:t})}},{key:"getPerformance",value:function(e,t){var n="";if(4===arguments.length){var r=arguments[2],o=arguments[3];n+="/dateRange?",n+="startDate="+r.getFullYear()+("0"+(r.getMonth()+1)).slice(-2)+("0"+r.getDate()).slice(-2),n+="&endDate="+o.getFullYear()+("0"+(o.getMonth()+1)).slice(-2)+("0"+o.getDate()).slice(-2)}else 3===arguments.length&&(n+="/history?period="+arguments[2]);return(0,s.default)({method:"GET",endpoint:"/users/"+e+"/accountPerformance/"+t+n,sessionKey:l.default.get(e)}).then(function(e){return e.body.performance})}},{key:"getListForUserID",value:function(t){return(0,s.default)({method:"GET",endpoint:"/users/"+t+"/accounts",sessionKey:l.default.get(t)}).then(function(t){return t.body.map(function(t){return new e(t)})})}},{key:"create",value:function(t,n,r){return n===e.TYPES.PRACTICE&&(r={userID:t,responseType:"full",tranAmount:r}),(0,s.default)({method:"POST",endpoint:n===e.TYPES.PRACTICE?"/signups/practice":"/signups/live",sessionKey:l.default.get(t),body:r}).then(function(e){return e.body})}},{key:"changeSubscription",value:function(e,t){var n=t.userID,r=t.accountID,u=t.planID,a=t.paymentID;return(0,s.default)({method:e,endpoint:"/users/"+n+"/accounts/"+r+"/subscriptions",sessionKey:l.default.get(n),body:e.startsWith("P")?o({planID:u},a.startsWith("card")?"cardID":"bankAccountID",a):void 0}).then(function(e){return e.body})}},{key:"getSubscription",value:function(t){return e.changeSubscription("GET",t)}},{key:"addSubscription",value:function(t){return e.changeSubscription("POST",t)}},{key:"updateSubscription",value:function(t){return e.changeSubscription("PUT",t)}},{key:"cancelSubscription",value:function(t){return e.changeSubscription("DELETE",t)}}]),e}();m.BLOTTER_TYPES={CASH:"cash",ORDERS:"orders",TRANSACTIONS:"transactions",POSITIONS:"positions",ALL:null},m.STATUSES={PENDING:1,OPEN:2,OPEN_NO_NEW_TRADES:3,CLOSED:9},m.TYPES={PRACTICE:1,LIVE:2},t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=e.method,n=void 0===t?"GET":t,r=e.endpoint,a=e.sessionKey,i=e.body,s=e.addlHeaders,c=void 0===s?{}:s,l=e.host,d=void 0===l?o.HOSTS.API:l,f={Accept:"application/json"};"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(f["Content-Type"]="application/json"),a&&(f["x-mysolomeo-session-key"]=a);for(var p in c)f[p]=c[p];return r=o.Config.env[d]+r,"application/json"===f["Content-Type"]&&(i=JSON.stringify(i)),new Promise(function(e,t){o.Config.httpImpl(n,r,f,i,function(n,r,o){var a=r["Content-Type"]||r["content-type"]||"";if(o&&-1!==a.indexOf("application/json"))try{o=JSON.parse(o)}catch(e){}if("2"===String(n)[0]||"3"===String(n)[0])e({body:o,statusCode:n,headers:r});else{var i=void 0;o&&(i=o.message||JSON.stringify(o));var s=401===n?new u.DriveWealthSessionError(i,o,n,r):new u.DriveWealthError(i,o,n,r);t(s)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(3),u=n(4);e.exports=t.default},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.env,n=e.httpImpl,r=e.appTypeID,o=e.appVersion,u=e.wlpID,i=void 0===u?"DW":u,s=e.appsPartnerID,c=e.referralCode;a.env=t,a.httpImpl=n,a.appTypeID=r,a.appVersion=o,a.wlpID=i,a.appsPartnerID=s||i,a.referralCode=c}Object.defineProperty(t,"__esModule",{value:!0});var o,u;t.setup=r;var a=t.Config={env:null,httpImpl:null,appTypeID:null,appVersion:null,wlpID:null,appsPartnerID:null,referralCode:null},i=t.HOSTS={API:"api",APPS:"apps",REPORTS:"reports"};t.ENVIRONMENTS={UAT:(o={},n(o,i.API,"http://api.drivewealth.io/v1"),n(o,i.APPS,"http://apps.drivewealth.io"),n(o,i.REPORTS,"http://reports.drivewealth.io"),o),PROD:(u={},n(u,i.API,"https://api.drivewealth.net/v1"),n(u,i.APPS,"https://apps.drivewealth.com"),n(u,i.REPORTS,"https://reports.drivewealth.net"),u)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DriveWealthSessionError=t.DriveWealthError=void 0;var a=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=t.DriveWealthError=function(e){function t(e,n,u,a){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.body=n,i.statusCode=u,i.headers=a,i}return u(t,e),t}(i.default),c=t.DriveWealthSessionError=function(e){function t(e,n,u,a){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.body=n,i.statusCode=u,i.headers=a,i}return u(t,e),t}(i.default);t.default={DriveWealthError:s,DriveWealthSessionError:c}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(e){function t(e){n(this,t);var o=r(this,Object.getPrototypeOf(t).call(this,e));return o.name=o.constructor.name,o.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(o,o.constructor):o.stack=new Error(e).stack,o}return o(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports=u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._keys={},this._mainUser=null}return r(e,[{key:"save",value:function(e,t){this._keys[e]=t,this._mainUser=e}},{key:"get",value:function(e){return this._keys[e]}},{key:"getAny",value:function(){return this._keys[this._mainUser]}},{key:"remove",value:function(e){delete this._keys[e]}}]),e}(),u=t.sessions=new o;t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),s=r(i),c=n(6),l=r(c),d=n(4),f=Number.POSITIVE_INFINITY,p=function(){function e(t){u(this,e),Object.assign(this,t),this.rejectionReason=t.ordRejReason,this.status=t.ordStatus,this.type=t.ordType||t.orderType,this.price=t.stopPrice||t.limitPrice||t.price}return a(e,[{key:"cancel",value:function(){return e.cancel(this.orderID)}}],[{key:"cancel",value:function(e){return(0,s.default)({method:"DELETE",endpoint:"/orders/"+e,sessionKey:l.default.getAny()}).then(function(){})}},{key:"getByID",value:function(t){return(0,s.default)({method:"GET",endpoint:"/orders/"+t,sessionKey:l.default.getAny()}).then(function(t){var n=t.body,r=t.statusCode,o=t.headers;return void 0!==n.ordRejReason?Promise.reject(new d.DriveWealthError(n.ordRejReason,n,r,o)):new e(n)})}},{key:"create",value:function(t,n,r){var o=n.accountID,u=n.accountNo,a=n.userID,i=n.accountType,c=r.order,d=c.instrument,f=c.side,p=c.qty,y=c.amountCash,h=c.comment,v=c.autoStop,m=c.price,g=r.waitForFill,D=void 0===g||g,b=r.fillRetryInterval,I=void 0===b?1e3:b,S=r.fillMaxRetries,T=void 0===S?10:S;if(y&&p)throw new Error('"qty" and "amountCash" are mutually exclusive.');if(t!==e.TYPES.MARKET){if(T=2,!m)throw new Error('Limit and stop orders require a "price."');if(v)throw new Error('"autoStop" is only allowed for market orders.')}return(0,s.default)({method:"POST",endpoint:"/orders",sessionKey:l.default.get(a),body:{instrumentID:d.instrumentID||d.id||d,accountID:o,accountNo:u,userID:a,accountType:i,ordType:t,side:f,orderQty:p||void 0,amountCash:y||void 0,comment:h,autoStop:v,price:t===e.TYPES.STOP?m:void 0,limitPrice:t===e.TYPES.LIMIT?m:void 0}}).then(function(t){var n=t.body;return D?new Promise(function(t,r){var o=T,u=function u(){o-=1,e.getByID(n.orderID).then(function(n){var r=n.status!==e.STATUSES.NEW&&n.status!==e.STATUSES.PARTIAL_FILL;if(o<=0||r)return t(n);setTimeout(u,I)},function(e){return 404===e.body.code&&o>0?setTimeout(u,I):r(e)})};setTimeout(u,I)}):n.orderID})}},{key:"createCart",value:function(t,n){var r=t.accountID,u=t.accountNo,a=t.userID,i=t.accountType,c=n.orders,d=n.waitForFill,f=void 0===d||d,p=n.fillRetryInterval,y=void 0===p?500:p,h=n.fillMaxRetries,v=void 0===h?10:h;return(0,s.default)({method:"POST",endpoint:"/orders",sessionKey:l.default.get(a),body:c.map(function(t){return{instrumentID:t.instrument.instrumentID||t.instrument.id||t.instrument,accountID:r,accountNo:u,userID:a,accountType:i,ordType:e.TYPES.MARKET,side:e.SIDES.BUY,orderQty:t.qty?t.qty:void 0,amountCash:t.amountCash?t.amountCash:void 0,comment:t.comment,autoStop:t.autoStop}})}).then(function(t){var n=t.body,r=n,u=r.reduce(function(e,t,n){return Object.assign({},e,o({},c[n].referenceID,t))},{});return f?new Promise(function(t,n){var o=v;r=r.map(function(e,t){return Object.assign({},e,{referenceID:c[t].referenceID})});var a=function n(){if(o<=0)return t(u);o-=1,Promise.all(r.map(function(t){return new Promise(function(n,r){e.getByID(t.orderID).then(function(e){u[t.referenceID]=e,n()},function(r){r.body&&r.body.ordRejReason&&(u[t.referenceID]=new e(r.body)),n()})})})).then(function(){var r=!1;for(var o in u){var a=u[o].ordStatus;if(!a||a===e.STATUSES.NEW||a===e.STATUSES.PARTIAL_FILL){r=!0;break}}if(!r)return t(u);setTimeout(n,y)})};setTimeout(a,y)}):u})}},{key:"estimateCommission",value:function(t,n){t=Array.isArray(t)?t:[t];var r=0,o=0,u=void 0,a=n.basketSchedule;if(a&&a.schedule){var i=!0,s=!1,c=void 0;try{for(var l,d=a.schedule[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var p=l.value;if(p.basketSize===t.length){u=p.basketPrice;break}}}catch(e){s=!0,c=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw c}}}var y={},h=!0,v=!1,m=void 0;try{for(var g,D=t[Symbol.iterator]();!(h=(g=D.next()).done);h=!0){var b=g.value,I=b.qty,S=b.marketPrice,T=b.side,E=b.referenceID,O=I<1?n.fractionalRate:n.baseRate;O+={NEAREST:Math.round,CEIL:Math.ceil,FLOOR:Math.floor}[n.shareAmountRounding](Math.max(0,I-n.baseShares))*n.excessRate;var P=0,k=0;n.passThroughFees&&T===e.SIDES.SELL&&(k=I*S*119e-6,k=Math.min(5.95,k),k=Math.max(.01,k),I>=1&&(P=Math.floor(I)*S*13e-6,P=Math.min(f,P),P=Math.max(.01,P)));var w=O+P+k;r+=w,o+=P+k,y[E]={total:w,commission:O,fees:{sec:P,taf:k}}}}catch(e){v=!0,m=e}finally{try{!h&&D.return&&D.return()}finally{if(v)throw m}}return{total:u?u+o:r,multipleOrderDelta:u?u-r:0,byOrder:y}}}]),e}();p.SIDES={BUY:"B",SELL:"S"},p.TYPES={MARKET:"1",LIMIT:"2",STOP:"3"},p.STATUSES={NEW:"0",PARTIAL_FILL:"1",FILL:"2",CANCELED:"4",REJECTED:"8"},t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),i=r(a),s=n(6),c=r(s),l=n(3),d=function(){function e(){o(this,e)}return u(e,null,[{key:"getFundingMethods",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userID,n=e.accountID,r=e.language,o=e.minAmount,u=e.maxAmount,a=e.amount,s=e.filters,d=void 0===s?{}:s;if(a&&(o||u))throw new Error('"amount" is not compatible with "minAmount" or "maxAmount."');var f="partner="+l.Config.appsPartnerID+"&userID="+t+"&accountID="+n;return r&&(f+="&language="+r),o&&(f+="&minAmount="+o),u&&(f+="&maxAmount="+u),a&&(f+="&amount="+a),d.name&&(f+="&filter[name]="+d.name),d.country&&(f+="&filter[country]="+d.country),d.currency&&(f+="&filter[currency]="+d.currency),d.allowed&&(f+="&filter[allowed]="+d.allowed),(0,i.default)({method:"GET",host:l.HOSTS.APPS,endpoint:"/funding/methods?"+f,sessionKey:c.default.get(t)}).then(function(e){return e.body})}},{key:"getPastDeposits",value:function(e){return(0,i.default)({endpoint:"/funding/status",sessionKey:c.default.get(e)}).then(function(e){return e.body.data})}},{key:"getSubscriptionPlans",value:function(e){return(0,i.default)({endpoint:"/funding/ach/subscription-plans",sessionKey:c.default.get(e)}).then(function(e){return[].concat(e.body.data).sort(function(e,t){return e.amount-t.amount}).map(function(e){return Object.assign({},e,{amount:Number(e.amount/100)})})})}},{key:"getRecurringDeposit",value:function(e){return(0,i.default)({endpoint:"/funding/ach/recurring-deposits/"+e,sessionKey:c.default.getAny()}).then(function(e){return e.body})}},{key:"getRecurringDepositsForUser",value:function(e){return(0,i.default)({endpoint:"/users/"+e+"/recurring-deposits",sessionKey:c.default.get(e)}).then(function(e){return e.body})}},{key:"getRecurringDepositsForAccount",value:function(e,t){return(0,i.default)({endpoint:"/users/"+e+"/accounts/"+t+"/recurring-deposits",sessionKey:c.default.get(e)}).then(function(e){return e.body})}},{key:"updateRecurringDeposit",value:function(e,t){return(0,i.default)({method:"PATCH",endpoint:"/funding/ach/recurring-deposits/"+e,sessionKey:c.default.getAny(),body:t}).then(function(e){return e.body})}},{key:"deleteRecurringDeposit",value:function(e){return(0,i.default)({method:"DELETE",endpoint:"/funding/ach/recurring-deposits/"+e,sessionKey:c.default.getAny()}).then(function(){})}}]),e}();d.ALLOWED_TYPES={DEPOSIT:"DEPOSIT",WITHDRAW:"WITHDRAW",DEPOSIT_AND_WITHDRAW:"DEPOSIT_AND_WITHDRAW"},d.DEPOSIT_FREQUENCIES={BIWEEKLY:"BIWEEKLY",MONTHLY_FIRST:"MONTHLY_FIRST",MONTHLY_MIDDLE:"MONTHLY_MIDDLE",QUARTERLY:"QUARTERLY"},t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),i=r(a),s=n(3),c=n(6),l=r(c),d=function(){function e(){o(this,e)}return u(e,null,[{key:"getTransactions",value:function(e,t,n,r){var o="?sessionKey="+l.default.get(e)+"&ReportName=FinTrans&ReportFormat=JSON&AccountNumber="+t+"&DateStart="+n.toISOString()+"&DateEnd="+r.toISOString()+"&wlpID="+s.Config.wlpID+"&LanguageID=en_US";return(0,i.default)({method:"POST",host:s.HOSTS.REPORTS,endpoint:"/DriveWealth"+o,sessionKey:l.default.get(e),body:{}}).then(function(e){return e.body.transaction||[]})}},{key:"getPlacedOrders",value:function(e,t,n,r){var o="?sessionKey="+l.default.get(e)+"&ReportName=OrderTrans&ReportFormat=JSON&AccountNumber="+t+"&DateStart="+n.toISOString()+"&DateEnd="+r.toISOString()+"&wlpID="+s.Config.wlpID+"&LanguageID=en_US";return(0,i.default)({method:"POST",host:s.HOSTS.REPORTS,endpoint:"/DriveWealth"+o,sessionKey:l.default.get(e),body:{}}).then(function(e){return e.body.transaction||[]})}},{key:"getStatements",value:function(e,t,n,r){var o="?accountID="+t+"&startDate="+n.toISOString()+"&endDate="+r.toISOString()+"&type=02";return(0,i.default)({method:"GET",endpoint:"/statements"+o,sessionKey:l.default.get(e)}).then(function(e){return e.body||[]})}},{key:"getTradeConfirms",value:function(e,t,n,r){var o="?accountID="+t+"&startDate="+n.toISOString()+"&endDate="+r.toISOString()+"&type=01";return(0,i.default)({method:"GET",endpoint:"/statements"+o,sessionKey:l.default.get(e)}).then(function(e){return e.body||[]})}},{key:"getTaxDocuments",value:function(e,t,n,r){var o="?accountID="+t+"&startDate="+n.toISOString()+"&endDate="+r.toISOString()+"&type=03";return(0,i.default)({method:"GET",endpoint:"/statements"+o,sessionKey:l.default.get(e)}).then(function(e){return e.body||[]})}},{key:"generateDownloadURL",value:function(e,t,n){return(0,i.default)({method:"GET",endpoint:"/statements/"+t+"/"+n,sessionKey:l.default.get(e)}).then(function(e){return e.body.url})}},{key:"getSupportedCountries",value:function(){return(0,i.default)({method:"GET",endpoint:"/countries"}).then(function(e){return e.body||[]})}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),i=r(a),s=n(6),c=r(s),l=function(){function e(t){o(this,e),Object.assign(this,t)}return u(e,[{key:"getQuote",value:function(){return e.getQuote(this.symbol)}},{key:"getChartData",value:function(t){return 3===arguments.length?e.getChartData(this.instrumentID,t,arguments[1],arguments[2]):e.getChartData(this.instrumentID,t,arguments[1])}}],[{key:"getBySymbol",value:function(t){var n="string"==typeof t?[t]:t;return(0,i.default)({method:"GET",endpoint:"/instruments?symbols="+n.join(","),sessionKey:c.default.getAny()}).then(function(n){var r=n.body;return r=r.map(function(t){return new e(t)}),"string"==typeof t?r[0]:r})}},{key:"getByID",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,i.default)({method:"GET",endpoint:"/instruments/"+t+(n?"?options=F":""),sessionKey:c.default.getAny()}).then(function(t){return new e(t.body)})}},{key:"getAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1";return(0,i.default)({method:"GET",endpoint:"/instruments?tradeStatus="+t,sessionKey:c.default.getAny()}).then(function(t){return t.body.map(function(t){return new e(t)})})}},{key:"search",value:function(t){var n="?";return t.symbol&&(n+="symbol="+t.symbol+"&"),t.name&&(n+="name="+t.name+"&"),(0,i.default)({method:"GET",endpoint:"/instruments"+n,sessionKey:c.default.getAny()}).then(function(t){return t.body.map(function(t){return new e(t)})})}},{key:"getQuote",value:function(t){var n=(Array.isArray(t)?t:[t]).map(function(t){return t instanceof e?t.symbol:t});return(0,i.default)({method:"GET",endpoint:"/quotes?symbols="+n.join(","),sessionKey:c.default.getAny(),addlHeaders:{Accept:"text/plain"}}).then(function(e){var r=e.body,o={};r=r.split("|").slice(10);var u=!0,a=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(u=(s=c.next()).done);u=!0){var l=s.value,d=l.split(",");o[d[0]]={bid:Number(d[1]),ask:Number(d[2])}}}catch(e){a=!0,i=e}finally{try{!u&&c.return&&c.return()}finally{if(a)throw i}}return Array.isArray(t)||(o=o[n[0]]),o})}},{key:"getChartData",value:function(e,t){var n=void 0;if(4===arguments.length){n="dateStart="+arguments[2].toISOString().replace(/\.\d{3}/,"")+"&dateEnd="+arguments[3].toISOString().replace(/\.\d{3}/,"")}else n="tradingDays="+arguments[2];return(0,i.default)({method:"GET",endpoint:"/bars?instrumentID="+e+"&compression="+t+"&"+n,sessionKey:c.default.getAny()}).then(function(e){return e.body.data.split("|")})}}]),e}();l.TRADE_STATUSES={INACTIVE:"0",ACTIVE:"1",CLOSED:"2"},l.CHART_COMPRESSIONS={DAY:0,MINUTE_1:1,MINUTE_5:4,MINUTE_30:8,HOUR:9,WEEK:10},t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),i=r(a),s=n(3),c=n(6),l=r(c),d=n(1),f=r(d),p=function(){function e(t){o(this,e),Object.assign(this,t),this.fullName=t.firstName+" "+t.lastName}return u(e,[{key:"getAccounts",value:function(){return f.default.getListForUserID(this.userID)}},{key:"getSettings",value:function(t){return e.getSettings(this.userID,t)}},{key:"setSetting",value:function(t,n){return e.setSetting(this.userID,t,n)}},{key:"unsetSetting",value:function(t){return e.unsetSetting(this.userID,t)}},{key:"getStatus",value:function(){return(0,i.default)({method:"GET",endpoint:"/users/"+this.userID+"/status",sessionKey:l.default.get(this.userID)}).then(function(e){return e.body})}},{key:"logout",value:function(){return e.logout(this.userID)}},{key:"get",value:function(){return e.getByUserID(this.userID)}},{key:"update",value:function(t){return e.update(Object.assign({},t,{userID:this.userID,email:t.email||this.emailAddress}))}},{key:"uploadDocument",value:function(t,n){return e.uploadDocument(this.userID,t,n)}},{key:"getCreditCards",value:function(){return e.getCreditCards(this.userID)}},{key:"addCreditCard",value:function(t){return e.addCreditCard(this.userID,t)}},{key:"removeCreditCard",value:function(t){return e.removeCreditCard(this.userID,t)}}],[{key:"getAccounts",value:function(e){return f.default.getListForUserID(e)}},{key:"getSettings",value:function(e,t){return t?(0,i.default)({method:"GET",endpoint:"/users/"+e+"/settings/"+t,sessionKey:l.default.get(e)}).then(function(e){return e.body.value}):(0,i.default)({method:"GET",endpoint:"/users/"+e+"/settings",sessionKey:l.default.get(e)}).then(function(e){var t=e.body,n={},r=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;n[s.key]=s.value}}catch(e){o=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw u}}return n})}},{key:"setSetting",value:function(e,t,n){return(0,i.default)({method:"POST",endpoint:"/users/"+e+"/settings",sessionKey:l.default.get(e),body:{key:t,value:n}}).then(function(){})}},{key:"unsetSetting",value:function(e,t){return(0,i.default)({method:"DELETE",endpoint:"/users/"+e+"/settings/"+t,sessionKey:l.default.get(e)}).then(function(){})}},{key:"logout",value:function(e){return(0,i.default)({method:"DELETE",endpoint:"/userSessions/"+l.default.get(e),sessionKey:l.default.get(e)}).then(function(){l.default.remove(e)})}},{key:"getByUserID",value:function(t){return(0,i.default)({method:"GET",endpoint:"/users/"+t,sessionKey:l.default.get(t)}).then(function(t){return new e(t.body)})}},{key:"login",value:function(t,n){return(0,i.default)({method:"POST",endpoint:"/userSessions",body:{username:t,password:n,appTypeID:s.Config.appTypeID,appVersion:s.Config.appVersion,languageID:"en_US",osType:"unknown",osVersion:"unknown",scrRes:"unknown",ipAddress:"unknown"}}).then(function(t){var n=t.body;return l.default.save(n.userID,n.sessionKey),e.getByUserID(n.userID)})}},{key:"isUsernameAvailable",value:function(e){return(0,i.default)({method:"GET",endpoint:"/users?username="+e}).then(function(){return!1},function(e){return 404===e.statusCode||Promise.reject(e)})}},{key:"create",value:function(t){var n=t.username,r=t.password,o=t.firstName,u=t.lastName,a=t.email,c=t.languageID,l=t.referralCode,d=void 0===l?s.Config.referralCode:l,f=t.utmCampaign,p=t.utmContent,y=t.utmMedium,h=t.utmSource,v=t.utmTerm,m=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,i.default)({method:"POST",endpoint:"/signups/live",body:{username:n,password:r,firstName:o,lastName:u,emailAddress1:a,languageID:c,wlpID:s.Config.wlpID,referralCode:d,utmCampaign:f,utmContent:p,utmMedium:y,utmSource:h,utmTerm:v}}).then(function(){if(m)return e.login(n,r)})}},{key:"update",value:function(e){var t=e.userID,n=e.addressLine1,r=e.addressLine2,o=e.city,u=e.countryID,a=e.email,s=e.firstName,c=e.lastName,d=e.languageID,f=e.phoneHome,p=e.phoneWork,y=e.phone,h=e.stateProvince,v=e.zipPostalCode;return(0,i.default)({method:"PUT",endpoint:"/users/"+t,sessionKey:l.default.get(t),body:{addressLine1:n,addressLine2:r,city:o,countryID:u,emailAddress1:a,firstName:s,lastName:c,languageID:d,phoneHome:f,phoneWork:p,phoneMobile:y,stateProvince:h,zipPostalCode:v}}).then(function(){})}},{key:"uploadDocument",value:function(e,t,n){var r=new FormData;return r.append("token",e),r.append("documentType",n),r.append("documentImage",t),(0,i.default)({method:"POST",endpoint:"/documents",sessionKey:l.default.get(e),addlHeaders:{"Content-Type":"multipart/form-data"},body:r}).then(function(){})}},{key:"getCreditCards",value:function(e){return(0,i.default)({method:"GET",endpoint:"/users/"+e+"/credit-cards",sessionKey:l.default.get(e)}).then(function(e){return e.body})}},{key:"addCreditCard",value:function(e,t){return(0,i.default)({method:"POST",endpoint:"/users/"+e+"/credit-cards",sessionKey:l.default.get(e),body:{cardToken:t}}).then(function(e){return e.body})}},{key:"removeCreditCard",value:function(e,t){return(0,i.default)({method:"DELETE",endpoint:"/users/"+e+"/credit-cards/"+t,sessionKey:l.default.get(e)}).then(function(){})}},{key:"forgotPassword",value:function(e){return(0,i.default)({method:"POST",endpoint:"/users/passwords",body:{username:e}}).then(function(e){return e.body.passwordResetID})}},{key:"resetPassword",value:function(e,t,n){return(0,i.default)({method:"PUT",endpoint:"/users/passwords/"+e,body:{code:t,passwordResetID:e,password:n}})}}]),e}();p.STATUSES={PENDING:1,APPROVED:2,REJECTED:3,REVOKED:4,CLOSED:5},p.DOCUMENT_TYPES={PHOTO_ID:"Picture ID",PROOF_OF_ADDRESS:"Proof of address",PHOTO_ID_WITH_PROOF_OF_ADDRESS:"Picture ID_Proof of address"},t.default=p,e.exports=t.default}])});
//# sourceMappingURL=drivewealth.min.js.map
